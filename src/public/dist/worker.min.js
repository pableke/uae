const cacheName="v1",staticAssets=["./style.css","./multi-box.min.js","./webpush.html"];self.addEventListener("install",e=>{e.waitUntil(caches.open("v1").then(e=>e.addAll(staticAssets))),console.log("v1","cache is instaled!")}),self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(e=>Promise.all(e.map(e=>{if("v1"!=e)return caches.delete(e)}))).then(()=>{console.log("v1","now ready to handle fetches!")}))}),self.addEventListener("fetch",function(e){const t=e.request;new URL(t.url).origin===location.origin?caches.open("v1").then(e=>e.match(t)).then(n=>{e.respondWith(n||fetch(t))}):caches.open("v1").then(async n=>{try{const s=await fetch(t);await n.put(t,s.clone()),e.respondWith(s)}catch(s){console.log("cache-exception",s),e.respondWith(await n.match(t))}})}),self.addEventListener("push",e=>{let t=e.data?e.data.json():{},n=t.title||"Something Has Happened",s=t.message||"Here is something you might want to check out.",a=self.registration.showNotification(n,{body:s,tag:"vibration-sample",vibrate:[200,100,200,100,200,100,200],icon:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Archlinux-icon-crystal-64.svg/1024px-Archlinux-icon-crystal-64.svg.png"});e.waitUntil(a)});